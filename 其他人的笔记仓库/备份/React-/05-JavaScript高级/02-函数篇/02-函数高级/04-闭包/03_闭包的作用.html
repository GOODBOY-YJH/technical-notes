<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>03_闭包的作用</title>
	</head>

	<body>
		<!--
      1. 延长外部函数变量对象的声明周期
      2. 让函数外部可以操作(读写)到函数内部的数据(变量/函数)
      3. 注意： 浏览器为了性能后期将外部函数中不被内部函数使用的变量清除了

      问题:
        1. 函数执行完后, 函数内部声明的局部变量是否还存在?
        由于闭包，函数内部声明的局部变量存在
        2. 在函数外部能直接访问函数内部的局部变量吗?
        不能直接访问，通过闭包可以实现函数外部间接访问函数内部变量
    -->
		<script type="text/javascript">
			function fun1() {
				var a = 3

				function fun2() {
					a++ // 引用外部函数的变量--->产生闭包
					console.log(a)
				}

				return fun2
			}
			var f = fun1() // 由于f引用着内部的函数-->内部函数以及闭包都没有成为垃圾对象
			// f.xxx = 外部函数的变量对象 = {a: 3}

			f() // 间接操作了函数内部的局部变量，打印a为4
			f() // 打印a为5
			f() // 打印a为6
			f = f() // 函数每调用一次就会创建一个新的变量对象，故原来变量对象中的a的值不再起作用，新变量对象重新来过即a为3开始
			f() // 打印a为4
		</script>
	</body>
</html>
