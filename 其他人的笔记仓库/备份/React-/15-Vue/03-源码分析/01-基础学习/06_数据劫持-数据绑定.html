<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>06_数据劫持-数据绑定</title>
		<!--
      1. 数据绑定
          * 初始化显示: 页面(表达式/指令)能从data读取数据显示 (编译/解析)
          * 更新显示: 更新data中的属性数据==>页面更新
    -->
	</head>
	<body>
		<!-- 
      new Watcher时：
      每个模板语法和一般指令都有一个对应的watcher(每调用一次bind就会创建一个对应的watcher)
      每个watcher都有一个对应的节点(节点通过闭包得以保存，是将来需要更新的节点)
      每个watcher都有一个用于更新节点的回调函数
    -->
		<div id="test">
			<p>{{name}}</p>
			<p v-text="name"></p>
			<p v-text="wife.name"></p>
			<button v-on:click="update">更新</button>
		</div>

		<script src="./js/compile.js"></script>
		<script src="./js/mvvm.js"></script>
		<script src="./js/observer.js"></script>
		<script src="./js/watcher.js"></script>
		<script>
			const vm = new MVVM({
				el: '#test',
				data: {
					name: 'ton',
					wife: {
						name: 'jerry',
						age: 24,
					},
				},
				methods: {
					update() {
						this.name = 'jack'
						this.wife.name = 'rose'
					},
				},
			})
		</script>
	</body>
</html>
